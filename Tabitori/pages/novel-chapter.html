<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小说章节 - 旅鸟</title>
    <link rel="stylesheet" href="../css/styles.css">
    <script src="../js/script.js" defer></script>
    <script defer>
        // 章节数据
        const chapters = [
            { id: 0, title: "风滚草", content: "（一只旅鸟随着对话在笨拙地飞的几张CG）\n\n人们都说，鸟是最自由的，可以翱翔在广阔的天空。\n\n但那只是一个臆想，鸟最想的，反而是能逃离天空汹涌的气流，扎根在安定的土地上。\n\n所以我一直在寻找，永远在寻找。\n\n漂泊着，像一只旅鸟。\n\n（CG中鸟儿继续徘徊，拉远出现主人公（女）凝望的背影，渐渐黑幕）\n\n（碰酒杯的声音，聚会的嘈杂声渐起）\n\n\"小桐……小桐\"\n\n\"嗯，啊……\"看来我刚刚发呆了。\n\n\"敬你一杯，嘻嘻\"\n\n\"嗯，我也敬你。\"\n\n\"每次同学聚会，打完招呼后就是我们几个聊了呢，可惜雅子那家伙在男人堆里陪男朋友，不然就和那时候一样了，哼——\"晓榆喝完一大口，故作娇态地埋怨到。\n\n我咽下抿的一口，虽说是果酒，还是有点冲。\n\n\"不也挺好的吗？她一直都走在前面呢\"我从好方面回道。\n\n\"好什么好呀，丢下我们也好吗？算了，我们也丢下她，不谈了\"\n\n看来她的话引子已经达到效果了。\n\n\"你……在北京的生活怎么样啊？\"她换了副面孔继续到。\n\n\"挺好的，大学不都那个样\"我微笑回道。\n\n\"是呢，哈哈哈！\"她听完大笑起来。\"不过，我们几个，什么时候距离这么远了呢？\"\n\n\"我……不知道\"客套话惹人不满意了啊。\n\n\"你还在继续当'旅鸟'吗？\"她若无其事地说道。\n\n\"啊啊啊，别说了，好害羞啊\"我双手捂上了脸苦笑。\n\n\"哈哈哈哈，是你自己在OO空间里说自己和旅鸟一样，一直在到处漂泊的嘛~\"\n\n\"……我讨厌同学聚会……\"\n\n\"不要啊，还没借同学之口展开你的过去，快速交待你从小学知识朋友双无、随波逐流上了三中，然后中考进重点班却和老师闹矛盾转去艺术班一个月，最后还是转回来根据分数报了个理科大学，一路迷茫一直到现在的逆旅人生呢\"" },
            { id: 1, title: "栖息地", content: "（电视音）\"八月立秋，鄱阳湖以白鹭为代表的夏候鸟已经开始聚集，分批地开始了今年地迁徙之旅，他们会在9月抵达东南亚，并在那里度过接下来的半年……\"\n\n每年去大学的路上经过都能看到呢。不过，他们也会迷失，到处漂泊，永远都是旅鸟吗？啊，应该不久就适应不了葬身他……\n\n不发呆了，书接上回，我似乎在同学聚会醉倒了，回完她们关心的微信后，我和那个世界也就回到了没什么联系的状态。\n\n有时不禁会想，明明之前之后都和陌生人一样，那几个小时的亲密无间究竟算什么呢？\n\n算了，我是肯定想不明白的吧，毕竟我做不到那样转变自如。\n\n但如果，距离和时间无法斩断我们间的羁绊，轮回转世，再次重逢，曾经仍然鲜明，那我还是会和当时一样满怀热情……为什么我还有这种少女幻想啊啊啊啊啊……我把头埋向小桌板。\n\n是的，我现在在火车上电脑前，当务之急是如何尽快新的课题组，或者，自己走一条别的路？……\n\n想起暑假我被莫须有的压力压垮以自学绘画为借口逃避的事，不知不觉又虚度了1/6年。不，还是有收获的，毕竟我奋发努力过一段时间，天道酬勤，功不唐捐，我火柴人画得更形象了。\n\n你或许已经开始思考我这只旅鸟迷茫失败的原因是摇摆不定，但事实不是这样，因为之前连借口都不用。\n\n总之，旅鸟没能回到大群的迁徙路线，仍迷失在一片荒地。\n\n但不论人生迷路到哪里，季节还是催促着人们到相应的栖息地去。\n\n就这样胡思乱想着，又到了学校南门，算是学校的牌面，宣传时必不可少的风景，每天都有许多伟大的人物由此进出。\n\n当然，也有我这样的路人114514号，不过都会被忽略不计吧。\n\n按照游戏里的套路，每次到这个门都会有个好友元气满满地打招呼，那样这个游戏肯定有趣多了，可惜，我的人际关系差到现在还没有主要角色出场呢。要是我玩肯定早就关闭退款差评了吧，可惜我目前的勇气不足以让我退出这个游戏。还是赖活着吧……\n\n\"嗨……\"\n\n来了来了，JK的早上好，虽然不是早上、也和我无关……\n\n\"苏桐……？\"\n\n\"啊，嗨……\"我注意到右前方的人，有点僵硬地挥手回应。\n\n貌似正好碰到寝室长出去了，应该又是出去约会吧？真好呐女大学生生活真充实呐请问什么时候爆……\n\n\"今天回来？\"\n\n\"啊……是的。\"\n\n\"新学期加油！\"\n\n\"啊嗯，干巴爹马斯。\"\n\n不知道为什么，这样随便的问候让我的心有点暖，宅女原来这么好拿捏吗？一直没怎么和人说话、偶尔网上和人对线还是不太适应这种啊。怎么还突然走进一步噫啊……\n\n\"听露露说你不在组里了？换组了吗？暑假不能浪费啊，应该能完成论文建模的\"" },
            { id: 2, title: "候鸟群", content: "\"叩叩\"\n\n这本该响起的敲门声已经迟到十四分钟了，倒不是我迟到了，本来也没约定具体时间，而是我已经站在门前犹豫了14分钟……\n\n所幸，早上正是进进出出的时间，有位学长敲响了这个门。而我被看见已经没有回头路了，只得一鼓作气跟了进来。\n\n\"你来了啊，稍等，我收拾一下东西。\"\n\n寝室长压着比平常略低的声音，维持着办公室的安静。\n\n\"好的。\"\n\n我被感染得不由得拘谨僵硬地回答。\n\n\"不用紧张~\"\n\n她笑着拍了拍我，然后往外走去。\n\n路上，她解释到，那位导师平时比较忙，自己并不负责研究生的管理，而只管理3个博士生，3个博士生各带领有一个组，要帮我联系的是负责工业4.0超低时延可靠连接的组，在通信物理层与链路层跨层优化方向有一个奖项，而我在之前组中的方向确定性时延的一种方法就是这个，可以说很合适。\n\n今天上午那位导师正好在，" }
        ];
        
        // 结局数据
        const endings = [
            { id: 1, title: "飞向遥远的天空", type: "TE", content: "在经历了种种挫折和迷茫之后，苏桐最终决定勇敢地追求自己的理想。她放弃了现有的安稳，选择了一条充满挑战但更符合内心渴望的道路。\n\n虽然旅途艰辛，虽然未来充满不确定性，但她不再害怕。因为她终于明白，旅鸟的价值不在于找到一个永久的栖息地，而在于在不断飞翔中发现自我，实现自我。\n\n最终，她飞向了遥远的天空，那里有更广阔的世界，有更多的可能性，也有更真实的自己。" },
            { id: 2, title: "永恒盘旋的孤鸟", type: "NE", content: "苏桐在现实和理想之间不断徘徊，既不愿完全妥协于现实，又没有勇气彻底追求理想。她选择了一种中间状态，在熟悉的环境中继续生活，但内心始终怀着对远方的向往。\n\n这种状态让她既不会完全迷失，也不会完全满足。她像一只永恒盘旋的孤鸟，始终在天空中徘徊，既不降落，也不飞向更远的地方。\n\n或许这就是生活的常态，没有绝对的圆满，只有不断的妥协和平衡。" },
            { id: 3, title: "坠落不知的他乡", type: "BE", content: "现实的压力和理想的破灭让苏桐感到前所未有的挫败。她尝试过各种努力，但似乎总是事与愿违。在一次又一次的打击之后，她的内心防线终于崩溃了。\n\n她开始怀疑自己的能力，怀疑自己的选择，甚至怀疑生活的意义。最终，她在他乡迷失了方向，不知道自己该去向何方。\n\n这是一个悲伤的结局，但也是生活的一种可能。有时候，即使我们拼尽全力，也未必能够得到想要的结果。" },
            { id: 4, title: "栖居温暖的园地", type: "HE", content: "经过漫长的寻找和等待，苏桐终于找到了属于自己的栖息地。在这里，她感受到了温暖和接纳，也找到了自己的价值和归属感。\n\n虽然这个栖息地可能不如她曾经想象的那么完美，但它真实、温暖，让她感到安心。她在这里扎根，生长，绽放出属于自己的光彩。\n\n旅鸟最终找到了家，这或许是最美好的结局。" }
        ];

        // 获取URL参数
        function getUrlParameter(name) {
            name = name.replace(/[\[\]]/g, '\\$&');
            const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');
            const results = regex.exec(window.location.href);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }

        // 加载章节内容的函数
        function loadChapter() {
            const endingId = getUrlParameter('ending');
            
            // 检查是否为结局页面
            if (endingId) {
                loadEnding(parseInt(endingId, 10));
            } else {
                // 章节页面逻辑
                const chapterId = parseInt(getUrlParameter('id') || 0);
                const chapter = chapters.find(ch => ch.id === chapterId);
                
                if (chapter) {
                    // 更新页面标题和章节标题
                    document.title = `${chapter.title} - 旅鸟`;
                    document.getElementById('chapter-title').textContent = `第${chapter.id + 1}章 ${chapter.title}`;
                    
                    // 更新章节内容，将换行符转换为段落
                    const contentElement = document.getElementById('chapter-text');
                    contentElement.innerHTML = '';
                    
                    const paragraphs = chapter.content.split('\n\n');
                    paragraphs.forEach(para => {
                        if (para.trim()) {
                            const p = document.createElement('p');
                            p.textContent = para.trim();
                            contentElement.appendChild(p);
                        }
                    });
                    
                    // 设置导航链接
                    const prevLink = document.getElementById('prev-chapter');
                    const nextLink = document.getElementById('next-chapter');
                    
                    const prevChapter = chapters.find(ch => ch.id === chapterId - 1);
                    const nextChapter = chapters.find(ch => ch.id === chapterId + 1);
                    
                    if (prevChapter) {
                        prevLink.href = `novel-chapter.html?id=${prevChapter.id}`;
                        prevLink.style.display = 'inline-block';
                    } else {
                        prevLink.style.display = 'none';
                    }
                    
                    if (nextChapter) {
                        nextLink.href = `novel-chapter.html?id=${nextChapter.id}`;
                        nextLink.style.display = 'inline-block';
                    } else {
                        nextLink.style.display = 'none';
                    }
                } else {
                    // 如果找不到章节，显示错误信息
                    document.getElementById('chapter-title').textContent = '章节未找到';
                    document.getElementById('chapter-text').textContent = '抱歉，请求的章节不存在。';
                    document.getElementById('prev-chapter').style.display = 'none';
                    document.getElementById('next-chapter').style.display = 'none';
                }
            }
        }
        
        // 加载结局内容的函数
        function loadEnding(endingId) {
            // 查找对应的结局
            const ending = endings.find(e => e.id === endingId);
            
            if (!ending) {
                // 如果找不到对应结局，显示错误信息
                document.title = '结局不存在 - 旅鸟';
                document.getElementById('chapter-title').textContent = '结局不存在';
                document.getElementById('chapter-text').textContent = '找不到指定的结局。';
                
                // 隐藏上一章/下一章按钮
                document.getElementById('prev-chapter').style.display = 'none';
                document.getElementById('next-chapter').style.display = 'none';
                return;
            }
            
            // 更新页面标题和章节标题
            document.title = `${ending.title} - 旅鸟`;
            document.getElementById('chapter-title').textContent = `${ending.title} [${ending.type}]`;
            
            // 处理结局内容，将换行符转换为段落
            const contentElement = document.getElementById('chapter-text');
            contentElement.innerHTML = '';
            
            const paragraphs = ending.content.split('\n\n');
            paragraphs.forEach(paragraph => {
                if (paragraph.trim() !== '') {
                    const p = document.createElement('p');
                    p.textContent = paragraph;
                    contentElement.appendChild(p);
                }
            });
            
            // 隐藏上一章/下一章按钮
            document.getElementById('prev-chapter').style.display = 'none';
            document.getElementById('next-chapter').style.display = 'none';
        }

        // 页面加载时执行
        document.addEventListener('DOMContentLoaded', loadChapter);
    </script>
</head>
<body class="novel-chapter-page">
    <!-- 顶部导航栏 -->
    <header class="site-header">
        <div class="header-content">
            <a href="../index.html" class="logo-link">
                <div class="logo">旅鸟</div>
            </a>
            <nav class="main-nav">
                <ul>
                    <li><a href="../index.html">首页</a></li>
                    <li><a href="casual-notes.html">杂记</a></li>
                    <li><a href="works.html">一些作品</a></li>
                    <li><a href="novel.html">同名小说</a></li>
                    <li><a href="contact.html">联系</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- 小说章节内容 -->
    <section id="novel-chapter" class="novel-chapter-section">
        <h2 id="chapter-title">小说章节</h2>
        
        <div class="chapter-content">
            <p id="chapter-text">章节内容将根据URL参数动态加载...</p>
        </div>
        
        <div class="chapter-navigation">
            <a href="novel.html" class="back-to-chapters">返回章节列表</a>
            <div class="chapter-arrows">
                <a href="#" id="prev-chapter" class="chapter-nav-link">上一章</a>
                <a href="#" id="next-chapter" class="chapter-nav-link">下一章</a>
            </div>
        </div>
    </section>

    <!-- 底部区域 -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-logo">旅鸟 TABITORI</div>
            <div class="footer-info">
                <p>一个迷茫的人试图诉说</p>
                <p>© 2025 TABITORI. ALL RIGHTS RESERVED.</p>
            </div>
        </div>
    </footer>
</body>
</html>